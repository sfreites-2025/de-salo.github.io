<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Recuerdos Especiales - Para ti</title>
  <style>
    body {
      font-family: 'Times New Roman', Times, serif;
      background: linear-gradient(120deg, #FFDEE9 0%, #B5FFFC 100%);
      min-height: 100vh;
      margin: 0;
      padding: 0;
      color: #311b92;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow-x: hidden;
      transition: background 1s;
      animation: bgFadeIn 1.8s;
    }
    @keyframes bgFadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }

    #game-container {
      width: 85vw; max-width: 650px;
      background: rgba(255, 252, 255, 0.99);
      border-radius: 32px;
      box-shadow: 0 8px 48px 0 #41e9ed44, 0 1px 75px #ffdeecb8;
      padding: 32px 5vw 32px 5vw;
      text-align: center;
      position: relative;
      overflow: visible;
      min-height: 650px;
      margin: 4vh 0 4vh 0;
      z-index: 1;
      border: 2px solid #aef3fc88;
    }

    h1 {
      color: #9c27b0;
      font-size: 2em;
      letter-spacing: 0.03em;
      margin-bottom: 32px;
      font-weight: 700;
      text-shadow: 0 3px 12px #fff1fa, 0 2px 10px #d1c3ff3a;
    }

    #memory-maze {
      width: 100%; max-width: 560px; min-width: 320px;
      height: 340px; background: linear-gradient(120deg,#fdc3f4 0%, #a9f6fc 100%);
      border-radius: 22px;
      margin: 24px auto 20px auto;
      position: relative;
      box-shadow: 0 4px 26px #41e9ed52,0 2px 22px #ea4faf37;
      overflow: hidden;
      border: 2.5px solid #b1eafd;
      transition: box-shadow 0.7s;
      animation: mazePulse 3s infinite alternate;
    }
    @keyframes mazePulse {
      from { box-shadow: 0 4px 26px #41e9ed48;}
      to { box-shadow: 0 5px 42px #ffc8e7af, 0 2px 42px #a2f3fd77;}
    }
    #player {
      width: 28px; height: 28px;
      background: radial-gradient(circle at 25% 30%, #ff59ac 80%, #f857ae 100%);
      border-radius: 50%;
      position: absolute;
      bottom: 10px; left: 10px;
      box-shadow: 0 2px 13px #ff9ada81, 0 0 44px #e3cdff57;
      border: 2.5px solid #f5f3ffca;
      z-index: 4;
      display:flex; align-items:center; justify-content:center;
      transition: box-shadow 0.6s;
      animation: playerFloat 2.8s infinite alternate cubic-bezier(.41,.8,.51,1.09);
    }
    @keyframes playerFloat {
      0% {box-shadow: 0 2px 13px #ff9ada81, 0 0 18px #ffe4f7;}
      100% {box-shadow: 0 8px 38px #ee43a085, 0 0 54px #bbefff90;}
    }
    #player:after {
      content: "üíó";
      font-size: 1.27em;
      position: absolute; left:4.2px; top:-2.5px;
      pointer-events:none;
    }

    .memory {
      width: 44px; height: 44px;
      background: linear-gradient(140deg,#befff7 15% 65%, #ffcbf0 100%);
      border: 2.6px dashed #bf5af2f0;
      border-radius: 50%;
      position: absolute;
      display: flex;
      align-items: center; justify-content: center;
      font-size: 26px;
      cursor: pointer;
      box-shadow: 0 2px 11px #ea4ffa5a, 0 2px 24px #6be7e944;
      filter: drop-shadow(0 2px 5px #ffb5ee33);
      transition: transform 0.33s, background 0.24s;
      animation: memoryPop 2s infinite alternate;
      z-index: 2;
      user-select: none;
    }
    @keyframes memoryPop {
      from {transform: scale(1);}
      to   {transform: scale(1.07);}
    }
    .memory:hover {
      transform: scale(1.26) rotate(-2deg);
      background: linear-gradient(120deg, #fff5f7, #f8bbff 79%, #befcff 100%);
      z-index: 5;
      box-shadow: 0 2px 22px #e3aeffad;
    }

    #controls {
      margin: 20px 0 10px 0;
      user-select: none;
    }
    button {
      font-family: 'Times New Roman', Times, serif;
      background: linear-gradient(99deg, #fd558e 10%, #7ae0ea 100%);
      color: #6d1472;
      border: none;
      padding: 10px 28px;
      border-radius: 9px;
      font-size: 1.19em;
      font-weight: 700;
      cursor: pointer;
      margin: 7px 9px 6px 9px;
      box-shadow: 0 1px 16px #5ff5fc42;
      transition: background 0.19s, color 0.22s, box-shadow 0.18s;
      letter-spacing: 0.03em;
      outline: none;
      border: 1.2px solid #ddf6fdcc;
      min-width:56px;
      animation: btnpulseIn 1.7s infinite alternate;
    }
    button:hover {
      background: linear-gradient(112deg,#7ae0ea,#fd558e 86%);
      color: #ea20b8;
    }
    @keyframes btnpulseIn {
      0%{box-shadow: 0 2px 13px #aebaff75;}
      100%{box-shadow: 0 6px 26px #ffe4faaf;}
    }
    #message {
      min-height: 54px;
      margin: 25px 0 15px 0;
      padding: 12px 10px 9px 10px;
      background: linear-gradient(90deg, #ffebfb 70%, #fff7ee 100%);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.14em;
      color: #9626b2;
      font-family: 'Times New Roman', Times, serif;
      box-shadow: 0 2px 18px #eebeff33;
      animation: msgIntro 2.3s cubic-bezier(.71,1.8,.41,.97) both;
    }
    @keyframes msgIntro {
      0% {opacity: 0; transform: translateY(36px);}
      100%{opacity:1; transform:none;}
    }

    .memory-card-modal {
      position: fixed;
      top:0; left:0; width: 100vw; height: 100vh;
      background: rgba(186,245,255,0.85);
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      z-index: 10000;
      animation: fadeModalIn 0.5s;
    }
    @keyframes fadeModalIn {
      from { opacity: 0; }
      to   { opacity: 1; }
    }

    .memory-popup {
      background: linear-gradient(130deg,#fff0fa 67%, #c1fff0 100%);
      border-radius: 24px;
      box-shadow: 0 4px 32px #ffb2f8d0, 0 2px 33px #a3fcffbc;
      padding: 44px 30px 33px 30px;
      min-width: 270px;
      max-width: 90vw;
      text-align: center;
      animation: popInMem 0.85s cubic-bezier(.4,2,.22,1.07) both;
    }
    @keyframes popInMem {
      0% {opacity:0; transform: scale(0.8);}
      70%{opacity: .76; }
      100%{opacity:1;  transform: scale(1);}
    }
    .memory-popup img {
      width: 112px; height: 112px;
      object-fit: cover;
      border-radius: 21px;
      box-shadow: 0 2px 14px #eee0fd9d, 0 2px 18px #fc7bc52a;
      border: 2px solid #ff55c8a6;
      margin-bottom: 23px;
      animation: imgPulse 3s infinite alternate;
    }
    @keyframes imgPulse {
      from { box-shadow: 0 1px 16px #ffe3fa44;}
      to { box-shadow: 0 5px 33px #b1ebffd5;}
    }
    .memory-popup .memo-message {
      color: #9b2587;
      font-size: 1.16em;
      margin-bottom: 24px; margin-top: 9px;
      font-family: 'Times New Roman', Times, serif;
      letter-spacing: 0.01em;
    }

    .memory-popup .faltan-btn {
      margin-top: 3px;
      background: linear-gradient(99deg,#ffbcda,#8cf5ff 89%);
      color: #7c228b;
      font-size: 1.1em;
      font-family: 'Times New Roman', Times, serif;
      font-weight: 700;
      border: 1.5px solid #ff7efd72;
      box-shadow: 0 1px 10px #f198ff33;
      padding: 11px 38px;
      border-radius: 14px;
      animation: btnpulseIn 1.2s infinite alternate;
    }

    #final-message {
      display: none;
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(255, 190, 245, 0.96);
      color: #a7138a;
      font-family: 'Times New Roman', Times, serif;
      flex-direction: column; align-items: center; justify-content: center;
      border-radius: 25px;
      z-index: 10;
      font-size: 1.36em;
      animation: finalFadeIn 1s;
    }
    @keyframes finalFadeIn {
      from {opacity: 0;}
      to   {opacity: 1;}
    }
    #final-message h2 {
      font-size: 2.1em;
      letter-spacing: 0.03em;
      margin-bottom: 4px;
    }
    #final-message p {
      margin: 8px 0;
      color: #6c2a71;
      font-size: 1.15em;
    }
    #final-message button {
      margin-top: 24px;
      padding: 13px 38px;
      background: linear-gradient(99deg,#f3a1ff,#bcf6ff 89%);
      color: #7c228b;
      font-size: 1.1em;
      font-family: 'Times New Roman', Times, serif;
      font-weight: 700;
    }
    .heart {
      position: absolute;
      font-size: 22px;
      color: #e92d82;
      animation: float 3s ease-in-out infinite;
      user-select:none;
      pointer-events: none;
      z-index: 8;
    }
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px) scale(1.1);}
    }
  </style>
</head>
<body>
  <div id="game-container">
    <h1>Laberinto de Recuerdos</h1>
    <div id="memory-maze">
      <div id="player"></div>
      <!-- Los recuerdos se generar√°n din√°micamente -->
    </div>
    <div id="controls">
      <button id="up-btn">‚Üë</button><br>
      <button id="left-btn">‚Üê</button>
      <button id="right-btn">‚Üí</button><br>
      <button id="down-btn">‚Üì</button>
    </div>
    <div id="message">
      Mueve el coraz√≥n rosa para encontrar nuestros recuerdos especiales...
    </div>
    <div id="final-message">
      <h2>Gracias por jugar</h2>
      <p>Aunque las cosas hayan cambiado, estos momentos siempre ser√°n especiales.</p>
      <p>Te deseo lo mejor.</p>
      <button id="restart-btn">Volver a jugar</button>
    </div>
  </div>
  <!-- Modal de recuerdo (se genera din√°micamente) -->
  <script>
    // Recuerdos con im√°genes relacionadas
    const memories = [
        {x: 50, y: 50, emoji: "‚ù§Ô∏è", message: "Nuestro primer beso... qu√© nervios sent√≠a", img: "https://i.ibb.co/BTQZDR5/beso-pareja.jpg"},
        {x: 400, y: 80, emoji: "üç≥", message: "Ese d√≠a que cocinamos juntos y todo sali√≥ delicioso", img: "https://i.ibb.co/51hp1tQ/cocinando.jpg"},
        {x: 200, y: 150, emoji: "üé¨", message: "Cuando fuimos al cine y nos re√≠mos toda la pel√≠cula", img: "https://i.ibb.co/XCmmThn/cine.jpg"},
        {x: 350, y: 200, emoji: "üåá", message: "El atardecer que vi reflejado en tus ojos", img: "https://i.ibb.co/Dw2x53q/atardecer.jpg"},
        {x: 100, y: 250, emoji: "ü§£", message: "Tus bromas que siempre me hac√≠an re√≠r", img: "https://i.ibb.co/tx3J3J9/risa.jpg"},
        {x: 450, y: 100, emoji: "‚öΩ", message: "Nuestra primera vez juntos en una cancha de f√∫tbol", img: "https://i.ibb.co/YcjHyLh/futbol.jpg"},
        {x: 300, y: 50, emoji: "üé∂", message: "506 de Morat, la canci√≥n que siempre asociar√© contigo...", img: "https://i.ibb.co/Wsf1dhQ/musica.jpg"},
        {x: 150, y: 100, emoji: "üå≥", message: "Los d√≠as en que √≠bamos a parques a pasar tiempo juntos", img: "https://i.ibb.co/vx0nK72/parque.jpg"},
        {x: 400, y: 200, emoji: "‚ú®", message: "Tu belleza irradiando destellos de luz que me dejaban sin palabras", img: "https://i.ibb.co/16TWW22/destellos.jpg"}
    ];

    const player = document.getElementById('player');
    const maze = document.getElementById('memory-maze');
    const messageDiv = document.getElementById('message');
    const finalMessage = document.getElementById('final-message');
    const restartBtn = document.getElementById('restart-btn');

    let playerX = 10;
    let playerY = 270;
    let foundMemories = [];

    // Crear los recuerdos en el laberinto
    function createMemories() {
      memories.forEach((memory, index) => {
        const memoryElement = document.createElement('div');
        memoryElement.className = 'memory';
        memoryElement.style.left = `${memory.x}px`;
        memoryElement.style.top = `${memory.y}px`;
        memoryElement.innerText = memory.emoji;
        memoryElement.dataset.index = index;
        maze.appendChild(memoryElement);
      });
    }

    // Chequear colisi√≥n jugador con memorias
    function checkMemoriesCollision() {
      document.querySelectorAll('.memory').forEach(mem => {
        const idx = parseInt(mem.dataset.index);
        if (foundMemories.includes(idx)) return;
        const rectA = mem.getBoundingClientRect();
        const rectB = player.getBoundingClientRect();
        // simple colisi√≥n rectangular
        if (rectA.left < rectB.right && rectA.right > rectB.left &&
            rectA.top < rectB.bottom && rectA.bottom > rectB.top) {
          showMemoryPopup(idx);
        }
      });
    }

    // Mostrar tarjeta del recuerdo (modal)
    function showMemoryPopup(idx) {
      foundMemories.push(idx);

      const mem = memories[idx];
      // Crea modal
      let modal = document.createElement('div');
      modal.className = 'memory-card-modal';
      modal.innerHTML = `
        <div class="memory-popup">
          <img src="${mem.img}" alt="recuerdo">
          <div class="memo-message">${mem.message}</div>
          <button class="faltan-btn">${foundMemories.length < memories.length ? 
            `Faltan (${memories.length-foundMemories.length})` : '¬°Todos los recuerdos encontrados!'}
          </button>
        </div>
      `;
      document.body.appendChild(modal);

      // Corazones animados al descubrir
      createHearts(8);

      // Bot√≥n cerrar modal
      modal.querySelector('.faltan-btn').onclick = () => {
        modal.remove();
        if (foundMemories.length === memories.length) {
          setTimeout(() => { finalMessage.style.display = 'flex'; }, 900);
        }
      }
      messageDiv.textContent = mem.message;
      // Visualmente tambi√©n "desactiva" el recuerdo en el laberinto
      document.querySelector(`.memory[data-index="${idx}"]`).style.opacity = 0.2;
      document.querySelector(`.memory[data-index="${idx}"]`).style.pointerEvents = 'none';
    }

    // Crear corazones flotantes animados
    function createHearts(count) {
      for (let i = 0; i < count; i++) {
        const heart = document.createElement('div');
        heart.className = 'heart';
        heart.innerHTML = 'üíñ';
        heart.style.left = `${5 + Math.random() * 91}%`;
        heart.style.top = `${15 + Math.random() * 60}%`;
        heart.style.fontSize = `${18 + Math.random() * 19}px`;
        heart.style.animationDuration = `${2.9 + Math.random()}s`;
        heart.style.animationDelay = `${Math.random() * 2}s`;
        maze.appendChild(heart);
        setTimeout(() => {
          heart.remove();
        }, 3000);
      }
    }

    // Movimiento del jugador
    function movePlayer(dx, dy) {
      const newX = playerX + dx;
      const newY = playerY + dy;
      if (newX >= 0 && newX <= maze.offsetWidth - 28 &&
          newY >= 0 && newY <= maze.offsetHeight - 28) {
        playerX = newX;
        playerY = newY;
        player.style.left = `${playerX}px`;
        player.style.top = `${playerY}px`;
        setTimeout(checkMemoriesCollision, 50); // Check despu√©s de mover
      }
    }

    // Botones de direcci√≥n
    document.getElementById('up-btn').addEventListener('click', () => movePlayer(0, -22));
    document.getElementById('down-btn').addEventListener('click', () => movePlayer(0, 22));
    document.getElementById('left-btn').addEventListener('click', () => movePlayer(-22, 0));
    document.getElementById('right-btn').addEventListener('click', () => movePlayer(22, 0));

    // Control con flechas
    document.addEventListener('keydown', (e) => {
      switch(e.key) {
        case 'ArrowUp': movePlayer(0, -22); break;
        case 'ArrowDown': movePlayer(0, 22); break;
        case 'ArrowLeft': movePlayer(-22, 0); break;
        case 'ArrowRight': movePlayer(22, 0); break;
      }
    });

    // Reiniciar juego
    restartBtn.addEventListener('click', () => {
      foundMemories = [];
      playerX = 10; playerY = 270;
      player.style.left = `${playerX}px`;
      player.style.top = `${playerY}px`;
      messageDiv.textContent = 'Mueve el coraz√≥n rosa para encontrar nuestros recuerdos especiales...';
      finalMessage.style.display = 'none';
      document.querySelectorAll('.memory').forEach(m => m.remove());
      createMemories();
    });

    // Crear el laberinto al empezar
    createMemories();
    // Empezar con el jugador en posici√≥n y todo limpio
    player.style.left = `${playerX}px`;
    player.style.top = `${playerY}px`;

  </script>
</body>
</html>
